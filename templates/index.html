<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuildAI Pro | Enterprise Suite</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Outfit:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div id="loadingOverlay" class="loading-overlay">
        <div class="loader-content">
            <i class="fa-solid fa-cube fa-bounce"></i>
            <h3>Analyzing Project...</h3>
        </div>
    </div>

    <div class="app-container">
        <aside class="sidebar">
            <div class="brand">
                <div class="logo-icon"><i class="fa-solid fa-layer-group"></i></div>
                <span>BuildAI <span class="pro-badge">PRO</span></span>
            </div>
            
            <nav class="menu">
                <a href="#" onclick="scrollToSection('estimator')"><i class="fa-solid fa-calculator"></i> Estimator</a>
                <a href="#" onclick="scrollToSection('analytics')"><i class="fa-solid fa-chart-line"></i> Analytics</a>
                <a href="#" onclick="scrollToSection('blueprints')"><i class="fa-solid fa-compass-drafting"></i> Blueprints</a>
                <a href="#" onclick="scrollToSection('schedule')"><i class="fa-solid fa-clock"></i> Schedule</a>
            </nav>
            <div class="sidebar-footer">
                <div class="sys-status"><span class="dot pulse"></span> Server Online</div>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="header-title">
                    <h1>Construction Dashboard</h1>
                    <p class="subtitle">AI-Powered Real-time Estimation</p>
                </div>
                <button class="signin-btn"><i class="fa-regular fa-user"></i> Sign In</button>
            </header>

            <section id="estimator" class="control-panel glass-panel">
                <form id="projectForm">
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Built-up Area (Sq. Yards)</label>
                            <input type="number" id="area" value="1000">
                        </div>
                        <div class="input-group">
                            <label>Floors</label>
                            <select id="floors">
                                <option value="G+1">G+1 (2 Floors)</option>
                                <option value="G+2" selected>G+2 (3 Floors)</option>
                                <option value="G+3">G+3 (4 Floors)</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Est. Cost (₹/sq ft)</label>
                            <input type="number" id="sqCost" value="1500">
                        </div>
                        <button type="submit" id="calculateBtn" class="primary-btn glow-effect">
                            <i class="fa-solid fa-bolt"></i> Generate Estimate
                        </button>
                    </div>
                </form>
            </section>

            <div id="resultsArea" class="dashboard-grid" style="display: none;">
                
                <div class="card metric-card">
                    <div class="icon-wrapper cost-icon"><i class="fa-solid fa-indian-rupee-sign"></i></div>
                    <div><p class="metric-label">Total Estimate</p><h2 class="metric-value" id="totalCostDisplay">₹0</h2></div>
                </div>
                <div class="card metric-card">
                    <div class="icon-wrapper steel-icon"><i class="fa-solid fa-weight-hanging"></i></div>
                    <div><p class="metric-label">Steel Required</p><h2 class="metric-value" id="steelDisplay">0 Tons</h2></div>
                </div>
                <div class="card metric-card">
                    <div class="icon-wrapper cement-icon"><i class="fa-solid fa-cubes"></i></div>
                    <div><p class="metric-label">Cement Bags</p><h2 class="metric-value" id="cementDisplay">0 Bags</h2></div>
                </div>

                <div id="analytics" class="card chart-card">
                    <div class="card-header"><h3>Cost Breakdown</h3></div>
                    <div class="chart-container"><canvas id="costChart"></canvas></div>
                </div>
                <div class="card chart-card">
                    <div class="card-header"><h3>Material Analysis</h3></div>
                    <div class="chart-container"><canvas id="materialChart"></canvas></div>
                </div>

                <div id="blueprints" class="card full-width">
                    <div class="card-header"><h3>Architectural Blueprint</h3></div>
                    <div id="blueprintContainer" class="blueprint-scroll"></div>
                </div>

                <div id="schedule" class="card full-width">
                    <div class="card-header">
                        <h3>Construction Execution Plan</h3>
                        <span class="badge ai">Groq AI</span>
                    </div>
                    
                    <div class="chart-container" style="height: 200px; margin-bottom: 30px;">
                        <canvas id="timelineChart"></canvas>
                    </div>

                    <div class="timeline-flow-container">
                        <h4 style="color: #94a3b8; margin-bottom: 20px; border-bottom: 1px solid #334155; padding-bottom: 10px;">Step-by-Step Execution Flow</h4>
                        <div id="timelineList" class="vertical-timeline">
                            </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <div id="chat-widget" class="chat-widget">
        <div class="chat-header">
            <span>AI Site Engineer</span>
            <button id="closeChat"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div id="chatMessages" class="chat-messages">
            <div class="message bot-message">Hello! I am your AI Engineer.</div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="Ask anything...">
            <button id="sendMessage"><i class="fa-solid fa-paper-plane"></i></button>
        </div>
    </div>
    <button id="chatToggle" class="chat-toggle-btn"><i class="fa-solid fa-comment-dots"></i></button>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>